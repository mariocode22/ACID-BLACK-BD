@if (muralData(); as mural) {
<div
  class="relative w-full min-h-[450px] sm:min-h-[520px] lg:min-h-[620px] flex flex-col items-center justify-center overflow-hidden px-4 sm:px-8 lg:px-12">

  <!-- Imagen de fondo con key única para forzar re-render -->
  <img [src]="mural.imagen" [alt]="mural.titulo" [attr.data-timestamp]="mural._timestamp" loading="eager"
    fetchpriority="high"
    class="absolute inset-0 w-full h-full object-cover brightness-75 transition-opacity duration-500"
    style="will-change: opacity" (load)="onImageLoad()" />

  <!-- Gradientes con z-index explícito -->
  <div class="absolute inset-0 bg-gradient-to-b from-black/30 via-transparent to-black/60" style="z-index: 1;"></div>
  <div class="absolute inset-0 bg-gradient-to-r from-[#781c2e]/5 via-transparent to-[#781c2e]/5" style="z-index: 2;">
  </div>

  <!-- Elementos decorativos -->
  <div
    class="absolute top-6 left-6 sm:top-10 sm:left-10 w-12 h-12 sm:w-16 sm:h-16 border-2 border-[#9b2c3a]/40 rotate-45 animate-pulse"
    style="z-index: 3;"></div>
  <div
    class="absolute bottom-6 right-6 sm:bottom-10 sm:right-10 w-10 h-10 sm:w-14 sm:h-14 border-2 border-[#9b2c3a]/40 rotate-12 animate-pulse"
    style="z-index: 3;"></div>
  <div class="absolute top-0 left-1/4 w-px h-full bg-gradient-to-b from-transparent via-[#b84a5a]/20 to-transparent"
    style="z-index: 3;"></div>
  <div class="absolute top-0 right-1/4 w-px h-full bg-gradient-to-b from-transparent via-[#b84a5a]/20 to-transparent"
    style="z-index: 3;"></div>

  <!-- Contenido central con z-index alto y animación -->
  <div class="relative mx-auto w-full text-center transition-opacity duration-500"
    style="z-index: 10; max-width: 72rem;" [class.opacity-100]="contentVisible()" [class.opacity-0]="!contentVisible()">

    <!-- Título -->
    <h1 class="text-xl sm:text-5xl lg:text-6xl font-metal text-white tracking-tight leading-tight sm:leading-none mb-4">
      <span class="block drop-shadow-[0_0_35px_rgba(120,28,46,0.8)]">
        {{ mural.titulo }}
      </span>
    </h1>

    <!-- Línea decorativa -->
    <div class="h-0.5 w-24 sm:w-32 bg-gradient-to-r from-transparent via-[#9b2c3a] to-transparent mx-auto mb-4 sm:mb-6">
    </div>

    <!-- Texto descriptivo con scroll personalizado -->
    <div class="px-1 sm:px-4">
      <div
        class="bg-black/50 backdrop-blur-sm border border-[#9b2c3a]/30 rounded-lg p-3 sm:p-6 lg:p-8 max-h-[180px] sm:max-h-[260px] lg:max-h-[300px] overflow-y-auto shadow-[0_0_25px_rgba(120,28,46,0.25)]"
        style="scrollbar-width: thin; scrollbar-color: #9b2c3a #000;">
        <p
          class="text-white text-sm sm:text-base lg:text-lg leading-relaxed font-light text-justify whitespace-pre-line">
          {{ mural.texto }}
        </p>
      </div>
    </div>
  </div>

  <!-- Sombra general -->
  <div class="absolute inset-0 pointer-events-none shadow-[inset_0_0_60px_30px_rgba(0,0,0,0.4)]" style="z-index: 9;">
  </div>
</div>
} @else {
<!-- Placeholder mientras carga -->
<div
  class="relative w-full min-h-[450px] sm:min-h-[520px] lg:min-h-[620px] flex flex-col items-center justify-center bg-gradient-to-b from-gray-900 to-black px-4 sm:px-8 lg:px-12">
  <div class="animate-pulse text-center space-y-4">
    <div class="h-10 w-64 bg-gray-700/50 rounded mx-auto"></div>
    <div class="h-4 w-32 bg-gray-700/50 rounded mx-auto"></div>
    <div class="h-32 w-96 max-w-full bg-gray-700/50 rounded mx-auto"></div>
  </div>
</div>
}

<!-- Estilos para scrollbar en WebKit (Chrome, Safari, Edge) -->
<style>
  /* Webkit browsers */
  .overflow-y-auto::-webkit-scrollbar {
    width: 6px;
  }

  .overflow-y-auto::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.3);
    border-radius: 3px;
  }

  .overflow-y-auto::-webkit-scrollbar-thumb {
    background: #9b2c3a;
    border-radius: 3px;
  }

  .overflow-y-auto::-webkit-scrollbar-thumb:hover {
    background: #b84a5a;
  }
</style>
